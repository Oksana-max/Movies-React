{"version":3,"file":"static/js/280.022b6508.chunk.js","mappings":"yLACA,GAAgB,OAAS,gC,6BCIV,SAASA,EAAcC,GAAU,IAAPC,EAAED,EAAFC,GACvCC,GAAkCC,EAAAA,EAAAA,UAASC,aAAaC,QAAQJ,EAAGK,GAAK,eAAiB,SAAQC,GAAAC,EAAAA,EAAAA,GAAAN,EAAA,GAA1FO,EAASF,EAAA,GAAEG,EAAYH,EAAA,GAC9BI,GAAkCR,EAAAA,EAAAA,UAASS,KAAKC,MAAMT,aAAaC,QAAQJ,EAAGK,GAAK,mBAAoB,IAAOQ,GAAAN,EAAAA,EAAAA,GAAAG,EAAA,GAAvGI,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAC9BG,GAAkCd,EAAAA,EAAAA,UAASC,aAAaC,QAAQJ,EAAGK,GAAK,cAAgB,kHAAuBY,GAAAV,EAAAA,EAAAA,GAAAS,EAAA,GAAxGE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAE9BG,GAAqBC,EAAAA,EAAAA,KAAbC,EAAIF,EAAJE,KAAMC,EAAEH,EAAFG,GAERC,EAAQ,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOC,EAAMzB,EAAI0B,EAAQC,EAAaC,GAAI,IAAAC,EAAA,OAAAP,EAAAA,EAAAA,KAAAQ,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,GAElCC,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAWjB,EAAI,QAAUD,EAAKmB,KAAM,CAC9DX,KAAMA,EACNzB,GAAIA,EACJ0B,OAAAA,EACAC,YAAAA,EACAC,KAAAA,IACC,KAAD,EANIC,EAAME,EAAAM,KAQZC,QAAQC,IAAI,6BAA8BV,EAAO7B,IAAI+B,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAS,GAAAT,EAAA,SAErDO,QAAQG,MAAM,0BAAyBV,EAAAS,IAAK,yBAAAT,EAAAW,OAAA,GAAAlB,EAAA,kBAE/C,gBAdamB,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,OAAA3B,EAAA4B,MAAA,KAAAC,UAAA,KAeY,SAAAC,IAYzB,OAZyBA,GAAA7B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAA1B,SAAA4B,IAAA,IAAAtC,EAAAuC,EAAAjD,EAAA,OAAAmB,EAAAA,EAAAA,KAAAQ,MAAA,SAAAuB,GAAA,cAAAA,EAAArB,KAAAqB,EAAApB,MAAA,OACEnC,aAAawD,QAAQ3D,EAAGK,GAAK,YAAa,0DACtCa,EAAYf,aAAaC,QAAQJ,EAAGK,GAAK,cAAgB,iHAC7Dc,EAAaD,GAEbf,aAAawD,QAAQ3D,EAAGK,GAAK,gBAAiBM,KAAKiD,WAAU,IACzDH,EAAU9C,KAAKC,MAAMT,aAAaC,QAAQJ,EAAGK,GAAK,mBAAoB,GAC1EU,EAAa0C,GAEbtD,aAAawD,QAAQ3D,EAAGK,GAAK,aAAc,QACvCG,EAAYL,aAAaC,QAAQJ,EAAGK,GAAK,eAAiB,QAC9DI,EAAaD,GAAW,wBAAAkD,EAAAX,OAAA,GAAAS,EAAA,KACzBD,EAAAF,MAAA,KAAAC,UAAA,CACD,OACEO,EAAAA,EAAAA,KAAA,UACEC,UAAWC,EAAEC,OACbC,SAAUnD,EACV,aAAYI,EACZgD,QAAS,YAnBX,WACwBX,EAAAF,MAAC,KAADC,UAAA,CAmBpBa,GACA3C,EAASxB,EAAG8B,KAAM9B,EAAGK,GAAIL,EAAG+B,OAAOqC,IAAKpE,EAAGgC,YAAahC,EAAGiC,KAC7D,EAAEoC,SACa,UAAd7D,GAAwBqD,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qBAAyBD,EAAAA,EAAAA,KAAA,KAAGC,UAAU,sBAGlF,C,sGCnDA,GAAgB,MAAQ,qBAAqB,eAAiB,8BAA8B,eAAiB,8BAA8B,aAAe,4BAA4B,cAAgB,6BAA6B,KAAO,oBAAoB,YAAc,2BAA2B,kBAAoB,iCAAiC,cAAgB,6BAA6B,UAAY,yBAAyB,aAAe,4BAA4B,eAAiB,8BAA8B,WAAa,0BAA0B,aAAe,4BAA4B,kBAAoB,iCAAiC,OAAS,uBCAxpB,GAAgB,MAAQ,2BAA2B,OAAS,4BAA4B,cAAgB,mCAAmC,WAAa,gCAAgC,WAAW,8BAA8B,cAAgB,mCAAmC,cAAgB,mCAAmC,aAAe,kCAAkC,aAAe,kCAAkC,YAAc,iCAAiC,eAAiB,qC,SC2Cze,EAzCoB,SAAH/D,GAAiF,IAADuE,EAAAvE,EAA1EwE,UAAAA,OAAS,IAAAD,GAAQA,EAAEE,EAAKzE,EAALyE,MAAwBC,GAAV1E,EAAP2E,QAAe3E,EAAN4E,OAAe5E,EAAP0E,SAAgBG,GAAF7E,EAAL8E,MAAe9E,EAAR6E,UAC1EE,EAAiB,SAAHrD,GAClB,GACO,WAFoBA,EAAHsD,IAGpBN,GAIN,EAOA,OALAO,EAAAA,WAAgB,WAEd,OADAC,SAASC,iBAAiB,UAAWJ,GAC9B,kBAAMG,SAASE,oBAAoB,UAAWL,EAAgB,CACvE,IAEQP,GACNV,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAEqB,MAAOlB,QAASO,EAAQJ,UACxCgB,EAAAA,EAAAA,MAAA,OAAKvB,UAAWC,EAAEuB,cAAepB,QAAS,SAACqB,GAAC,OAAKA,EAAEC,iBAAiB,EAACnB,SAAA,EACnEgB,EAAAA,EAAAA,MAAA,OAAKvB,UAAWC,EAAE0B,cAAcpB,SAAA,EAC9BR,EAAAA,EAAAA,KAAA,MAAIC,UAAWC,EAAE2B,aAAarB,SAAEG,KAChCX,EAAAA,EAAAA,KAAA,QAAMC,UAAWC,EAAE4B,aAAczB,QAASO,EAAQJ,SAAC,aAIrDR,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAE6B,YAAYvB,UAC5BR,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAE8B,eAAexB,UAC/BR,EAAAA,EAAAA,KAAA,UACEiC,MAAM,OACNC,OAAO,OACPvB,MAAM,UACNwB,IAAG,GAAAC,OAAKrB,EAAQ,4CAChBsB,MAAM,WACNC,gBAAgB,kBAAiB9B,UACjCR,EAAAA,EAAAA,KAAA,KAAAQ,SAAG,sQAlBK,IAyBtB,E,oBC1Ca+B,EAAY,WACvB,IAKAnG,GAA0BC,EAAAA,EAAAA,UAASmG,OAAOC,YAAWhG,GAAAC,EAAAA,EAAAA,GAAAN,EAAA,GAA9C6F,EAAKxF,EAAA,GAAEiG,EAAQjG,EAAA,GAYtB,OAVAkG,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAe,SAACC,GACpBH,EAASG,EAAMC,OAAOL,WACxB,EAEA,OADAD,OAAOnB,iBAAiB,SAAUuB,GAC3B,WACLJ,OAAOlB,oBAAoB,SAAUsB,EACvC,CACF,GAAG,IAEI,CACLX,MAAAA,EACAc,WAAYd,GAnBI,IAoBhBe,WAAYf,GAnBI,IAoBhBgB,WAAYhB,GAnBI,IAoBhBiB,WAAYjB,GAnBI,KAoBhBkB,YAAalB,GAnBI,KAqBrB,E,oBCjBMmB,GAASC,EAAAA,EAAAA,OAAK,kBAAM,6BAA4C,IAEvD,SAASC,IACtB,IA2BIvC,EA1BEvE,GADS+G,EAAAA,EAAAA,MACG/G,GAClBJ,GAAwBC,EAAAA,EAAAA,UAAS,IAAGI,GAAAC,EAAAA,EAAAA,GAAAN,EAAA,GAA/B4E,EAAKvE,EAAA,GAAE+G,EAAQ/G,EAAA,GACpBI,GAAgCR,EAAAA,EAAAA,WAAS,GAAKW,GAAAN,EAAAA,EAAAA,GAAAG,EAAA,GAAzC4G,EAASzG,EAAA,GAAE0G,EAAY1G,EAAA,GACpBS,GAASD,EAAAA,EAAAA,KAATC,KACAwE,EAAUM,IAAVN,OAERU,EAAAA,EAAAA,YAAU,YACR,WACE,IAAIgB,EAAY,wCAAAvB,OAA2C5F,GAC3DoH,MAAMD,EAAc,CAClBE,OAAQ,MACRC,QAAS,CACP,YAAaC,qCAGdC,MAAK,SAACC,GAAI,OAAKA,EAAKC,MAAM,IAC1BF,MAAK,SAACG,GACLX,EAASW,GACTT,GAAa,EACf,GACJ,CACAU,EACF,GAAG,CAAC5H,IAKAwE,GAASA,EAAMqD,QAAUrD,EAAMqD,OAAOC,SAASC,OAAS,IAErDxD,EADLC,EAAMqD,OAAOC,SAAS,GACNtD,EAAMqD,OAAOC,SAAS,GAAG/D,IAAIiE,QAAQ,WAAY,UAAUA,QAAQ,KAAM,UACzExD,EAAMqD,OAAOC,SAAS,GAAG/D,IAAIiE,QAAQ,WAAY,UAAUA,QAAQ,KAAM,WAG3F,IAAAC,EAA4BtD,EAAAA,UAAe,GAAMuD,GAAAhI,EAAAA,EAAAA,GAAA+H,EAAA,GAA1CE,EAAOD,EAAA,GAAEE,EAAQF,EAAA,GAElBxG,GAAS2G,EAAAA,EAAAA,UACTC,GAAWD,EAAAA,EAAAA,WAEjBlC,EAAAA,EAAAA,YAAU,WAENoC,YAAW,WACL7G,EAAO8G,SAAW/C,GAAS,KAC7B/D,EAAO8G,QAAQC,aAAa,QAAS,sDAEnCH,EAASE,SAAW/C,GAAS,KAC/B6C,EAASE,QAAQC,aAAa,QAAS,iCAE3C,GAAG,IAGP,GAAG,CAAChD,IAGJ,IACE,OAAOwB,GACLzD,EAAAA,EAAAA,KAACkF,EAAAA,EAAQ,KAETlF,EAAAA,EAAAA,KAAA,WAASC,UAAWC,EAAEc,MAAMR,UAC1BgB,EAAAA,EAAAA,MAAA,OAAKvB,UAAWC,EAAEiF,eAAe3E,SAAA,EAC/BgB,EAAAA,EAAAA,MAAA,OAAKvB,UAAWC,EAAEkF,eAAe5E,SAAA,EAC/BgB,EAAAA,EAAAA,MAAA,OAAKvB,UAAWC,EAAEmF,KAAK7E,SAAA,EACrBR,EAAAA,EAAAA,KAAA,MAAIC,UAAWC,EAAEoF,YAAY9E,SAAEQ,EAAM/C,QACrCuD,EAAAA,EAAAA,MAAA,OAAKvB,UAAWC,EAAEqF,aAAa/E,SAAA,EAC7BR,EAAAA,EAAAA,KAAA,QAAMC,UAAWC,EAAEsF,eAAehF,SAAEQ,EAAMyE,OAAOC,GAAGC,QAAQ,MAC5D3F,EAAAA,EAAAA,KAAA,QAAMC,UAAWC,EAAE0F,WAAWpF,SAAEQ,EAAM5C,WAExC4B,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAE2F,aAAarF,SAC5BQ,EAAM8E,QAAU9E,EAAM8E,OAAOC,KAAI,SAAC5J,EAAI6J,GAAK,OAAKhG,EAAAA,EAAAA,KAAA,QAAAQ,UAAoBwF,EAAQ,KAAO,IAAM7J,EAAG8B,MAAjC+H,EAA6C,MAE1GhF,EAAMiF,cAAezE,EAAAA,EAAAA,MAAA,QAAMvB,UAAWC,EAAEgG,kBAAkB1F,SAAA,CAAEQ,EAAMiF,YAAY,2BAC/EjG,EAAAA,EAAAA,KAAA,KAAGC,UAAWC,EAAEiG,kBAAkB3F,SAAEQ,EAAM7C,eAC1CqD,EAAAA,EAAAA,MAAA,OAAKvB,UAAWC,EAAEkG,cAAc5F,SAAA,CAC7BQ,EAAMqD,QAAUrD,EAAMqD,OAAOC,SAASC,OAAS,IAC9CvE,EAAAA,EAAAA,KAAA,UAAQC,UAAWC,EAAEmG,UAAWhG,QAAS,kBAAMuE,GAAS,EAAK,EAACpE,SAAC,gGAIhE/C,IAAQuC,EAAAA,EAAAA,KAAC/D,EAAAA,EAAc,CAACE,GAAI6E,QAG/BhB,EAAAA,EAAAA,KAACsG,EAAW,CAACtF,MAAOA,EAAOD,SAAUA,EAAUL,UAAWiE,EAAShE,MAAOK,EAAM/C,KAAM2C,QAAS,kBAAMgE,GAAS,EAAM,OAGrH5D,EAAMqD,QAAUrD,EAAMqD,OAAOC,SAASC,QAAUtC,EAAQ,IAAM,GAAmC,OAA9BjB,EAAMqD,OAAOC,SAAS/D,KACxFiB,EAAAA,EAAAA,MAAA,OAAKvB,UAAWC,EAAEqG,aAAa/F,SAAA,EAC7BR,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAEsG,cAAeC,IAAKvI,EAAOsC,UAC3CR,EAAAA,EAAAA,KAAA,OAAKmC,IAA4B,OAAvBnB,EAAM0F,SAASnG,IAAeS,EAAM0F,SAASnG,IAAuB,OAAjBS,EAAM9C,OAAkByI,EAAQ3F,EAAM9C,OAAOqC,IAAKqG,IAAI,wDAErH5G,EAAAA,EAAAA,KAAA,UACEiC,MAAM,OACNC,OAAO,OACPuE,IAAK3B,EACLnE,MAAM,UACNwB,IAAG,GAAAC,OAAKrB,EAAQ,0EAChBsB,MAAM,WACNwE,YAAY,IAAGrG,UACfR,EAAAA,EAAAA,KAAA,KAAAQ,SAAG,uQAIPR,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAEhC,OAAOsC,UACvBR,EAAAA,EAAAA,KAAA,OAAKmC,IAAsB,OAAjBnB,EAAM9C,OAAkB8C,EAAM9C,OAAOqC,IAAM,GAAIqG,IAAI,2DAInE5G,EAAAA,EAAAA,KAAC8G,EAAAA,SAAQ,CAACC,UAAU/G,EAAAA,EAAAA,KAAA,OAAAQ,SAAK,eAAiBA,UACxCR,EAAAA,EAAAA,KAACoD,EAAM,CAACzC,MAAM,0IAA4BK,MAAOA,UAM3D,CAAE,MAAO/B,GACPH,QAAQC,IAAIE,EACd,CACF,C","sources":["webpack://app-movies/./src/components/ButtonBookmark/ButtonBookmark.module.scss?2fe3","components/ButtonBookmark/ButtonBookmark.jsx","webpack://app-movies/./src/pages/Movie/Movie.module.scss?e72d","webpack://app-movies/./src/components/ModalWindow/ModalWindow.module.scss?7115","components/ModalWindow/ModalWindow.jsx","components/Resize/Resize.jsx","pages/Movie/Movie.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"btnAdd\":\"ButtonBookmark_btnAdd__MKjhL\"};","import React, { useState } from \"react\";\r\nimport s from \"./ButtonBookmark.module.scss\";\r\nimport useAuth from \"../providers/useAuth\";\r\nimport { collection, addDoc } from \"firebase/firestore\";\r\n\r\nexport default function ButtonBookmark({ el }) {\r\n  const [activeBtn, setActiveBtn] = useState(localStorage.getItem(el.id + \"AddedFilms\") || \"false\");\r\n  const [isDisable, setIsDisable] = useState(JSON.parse(localStorage.getItem(el.id + \"DisabledFilms\") || false));\r\n  const [dataTitle, setDataTitle] = useState(localStorage.getItem(el.id + \"dataTitle\") || \"Добавить в избранное\");\r\n\r\n  const { user, db } = useAuth();\r\n\r\n  const addFilms = async (name, id, poster, description, year) => {\r\n    try {\r\n      const docRef = await addDoc(collection(db, \"films\" + user._id), {\r\n        name: name,\r\n        id: id,\r\n        poster,\r\n        description,\r\n        year,\r\n      });\r\n\r\n      console.log(\"Document written with ID: \", docRef.id);\r\n    } catch (e) {\r\n      console.error(\"Error adding document: \", e);\r\n    }\r\n  };\r\n  async function handleClick() {\r\n    localStorage.setItem(el.id + \"dataTitle\", \"Добавлено\");\r\n    let dataTitle = localStorage.getItem(el.id + \"dataTitle\") || \"Добавить в избранное\";\r\n    setDataTitle(dataTitle);\r\n\r\n    localStorage.setItem(el.id + \"DisabledFilms\", JSON.stringify(true));\r\n    let disable = JSON.parse(localStorage.getItem(el.id + \"DisabledFilms\") || false);\r\n    setIsDisable(disable);\r\n\r\n    localStorage.setItem(el.id + \"AddedFilms\", \"true\");\r\n    let activeBtn = localStorage.getItem(el.id + \"AddedFilms\") || \"false\";\r\n    setActiveBtn(activeBtn);\r\n  }\r\n  return (\r\n    <button\r\n      className={s.btnAdd}\r\n      disabled={isDisable}\r\n      data-title={dataTitle}\r\n      onClick={() => {\r\n        handleClick();\r\n        addFilms(el.name, el.id, el.poster.url, el.description, el.year);\r\n      }}>\r\n      {activeBtn === \"false\" ? <i className=\"bx bx-bookmarks\"></i> : <i className=\"bx bxs-bookmarks\"></i>}\r\n    </button>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"movie\":\"Movie_movie__ZbQwJ\",\"movie__wrapper\":\"Movie_movie__wrapper__Jq0+L\",\"movie__content\":\"Movie_movie__content__oXgzl\",\"movie__video\":\"Movie_movie__video__P-588\",\"movie__poster\":\"Movie_movie__poster__ZufU2\",\"info\":\"Movie_info__g9FHl\",\"info__title\":\"Movie_info__title__kdNg2\",\"info__description\":\"Movie_info__description__Hz6ne\",\"info__buttons\":\"Movie_info__buttons__SPWZt\",\"info__btn\":\"Movie_info__btn__rZ823\",\"info__rating\":\"Movie_info__rating__ndqZT\",\"info__ratingKp\":\"Movie_info__ratingKp__nbLQy\",\"info__year\":\"Movie_info__year__M1-T6\",\"info__genres\":\"Movie_info__genres__x4fLj\",\"info__movieLength\":\"Movie_info__movieLength__pQZEc\",\"poster\":\"Movie_poster__o6oHQ\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"ModalWindow_modal__+XORu\",\"appear\":\"ModalWindow_appear__UESBm\",\"modal__dialog\":\"ModalWindow_modal__dialog__r0mHT\",\"animatetop\":\"ModalWindow_animatetop__jVOK+\",\"slide-in\":\"ModalWindow_slide-in__QGhHq\",\"modal__header\":\"ModalWindow_modal__header__svGbD\",\"modal__footer\":\"ModalWindow_modal__footer__p4hib\",\"moda__footer\":\"ModalWindow_moda__footer__zGHVv\",\"modal__close\":\"ModalWindow_modal__close__0Dvk+\",\"modal__body\":\"ModalWindow_modal__body__Kp5Qz\",\"modal__content\":\"ModalWindow_modal__content__EsxUc\"};","import s from \"./ModalWindow.module.scss\";\r\n\r\nimport React from \"react\";\r\nconst ModalWindow = ({ isVisible = false, title, content, footer, onClose, movie, srcVideo }) => {\r\n  const keydownHandler = ({ key }) => {\r\n    switch (key) {\r\n      case \"Escape\":\r\n        onClose();\r\n        break;\r\n      default:\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    document.addEventListener(\"keydown\", keydownHandler);\r\n    return () => document.removeEventListener(\"keydown\", keydownHandler);\r\n  });\r\n\r\n  return !isVisible ? null : (\r\n    <div className={s.modal} onClick={onClose}>\r\n      <div className={s.modal__dialog} onClick={(e) => e.stopPropagation()}>\r\n        <div className={s.modal__header}>\r\n          <h3 className={s.modal__title}>{title}</h3>\r\n          <span className={s.modal__close} onClick={onClose}>\r\n            &times;\r\n          </span>\r\n        </div>\r\n        <div className={s.modal__body}>\r\n          <div className={s.modal__content}>\r\n            <iframe\r\n              width=\"100%\"\r\n              height=\"100%\"\r\n              title=\"trailer\"\r\n              src={`${srcVideo}?autoplay=1&rel=0&autohide=1k&showinfo=0`}\r\n              allow=\"autoplay\"\r\n              allowFullScreen=\"allowfullscreen\">\r\n              <p>Ваш браузер устарел для отображения элемента iframe</p>\r\n            </iframe>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ModalWindow;\r\n","import { useState, useEffect } from \"react\";\r\nexport const useResize = () => {\r\n  const SCREEN_SM = 576;\r\n  const SCREEN_MD = 768;\r\n  const SCREEN_LG = 992;\r\n  const SCREEN_XL = 1200;\r\n  const SCREEN_XXL = 1400;\r\n  const [width, setWidth] = useState(window.innerWidth);\r\n\r\n  useEffect(() => {\r\n    const handleResize = (event) => {\r\n      setWidth(event.target.innerWidth);\r\n    };\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    width,\r\n    isScreenSm: width >= SCREEN_SM,\r\n    isScreenMd: width >= SCREEN_MD,\r\n    isScreenLg: width >= SCREEN_LG,\r\n    isScreenXl: width >= SCREEN_XL,\r\n    isScreenXxl: width >= SCREEN_XXL,\r\n  };\r\n};\r\n","import React, { useEffect, useRef, useState, Suspense, lazy } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport s from \"./Movie.module.scss\";\r\nimport ModalWindow from \"../../components/ModalWindow/ModalWindow.jsx\";\r\nimport Skeleton from \"../../components/Skeleton/Skeleton.jsx\";\r\nimport noImg from \"../../images/noImg.jpg\";\r\nimport { useResize } from \"../../components/Resize/Resize\";\r\nimport ButtonBookmark from \"../../components/ButtonBookmark/ButtonBookmark\";\r\nimport useAuth from \"../../components/providers/useAuth\";\r\n\r\nconst Actors = lazy(() => import(\"../../components/Actors/Actors.jsx\"));\r\n\r\nexport default function Movie() {\r\n  const params = useParams();\r\n  const id = params.id;\r\n  let [movie, setMovie] = useState([]);\r\n  let [isLoading, setIsLoading] = useState(true);\r\n  const { user } = useAuth();\r\n  const { width } = useResize();\r\n\r\n  useEffect(() => {\r\n    function getMovie() {\r\n      let protectedUrl = `https://api.kinopoisk.dev/v1.3/movie/${id}`;\r\n      fetch(protectedUrl, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"X-API-KEY\": process.env.REACT_APP_KEY,\r\n        },\r\n      })\r\n        .then((resp) => resp.json())\r\n        .then((data) => {\r\n          setMovie(data);\r\n          setIsLoading(false);\r\n        });\r\n    }\r\n    getMovie();\r\n  }, [id]);\r\n  // console.log(movie);\r\n  //===============================================================================================================================\r\n\r\n  let srcVideo;\r\n  if (movie && movie.videos && movie.videos.trailers.length > 0) {\r\n    movie.videos.trailers[1]\r\n      ? (srcVideo = movie.videos.trailers[1].url.replace(\"watch?v=\", \"embed/\").replace(\"v/\", \"embed/\"))\r\n      : (srcVideo = movie.videos.trailers[0].url.replace(\"watch?v=\", \"embed/\").replace(\"v/\", \"embed/\"));\r\n  }\r\n\r\n  const [isModal, setModal] = React.useState(false);\r\n\r\n  const poster = useRef();\r\n  const myIframe = useRef();\r\n\r\n  useEffect(() => {\r\n    function videoPlay() {\r\n      setTimeout(() => {\r\n        if (poster.current && width >= 500) {\r\n          poster.current.setAttribute(\"style\", \"opacity:0;visibility: hidden;pointer-events: none;\");\r\n        }\r\n        if (myIframe.current && width >= 500) {\r\n          myIframe.current.setAttribute(\"style\", \"opacity:1;visibility: visible;\");\r\n        }\r\n      }, 1000);\r\n    }\r\n    videoPlay();\r\n  }, [width]);\r\n\r\n  //============================================================================================================================================\r\n  try {\r\n    return isLoading ? (\r\n      <Skeleton />\r\n    ) : (\r\n      <section className={s.movie}>\r\n        <div className={s.movie__wrapper}>\r\n          <div className={s.movie__content}>\r\n            <div className={s.info}>\r\n              <h1 className={s.info__title}>{movie.name}</h1>\r\n              <div className={s.info__rating}>\r\n                <span className={s.info__ratingKp}>{movie.rating.kp.toFixed(1)}</span>\r\n                <span className={s.info__year}>{movie.year}</span>\r\n              </div>\r\n              <div className={s.info__genres}>\r\n                {movie.genres && movie.genres.map((el, index) => <span key={index}>{(index ? \", \" : \"\") + el.name}</span>)}\r\n              </div>\r\n              {movie.movieLength && <span className={s.info__movieLength}>{movie.movieLength} мин.</span>}\r\n              <p className={s.info__description}>{movie.description}</p>\r\n              <div className={s.info__buttons}>\r\n                {movie.videos && movie.videos.trailers.length > 0 && (\r\n                  <button className={s.info__btn} onClick={() => setModal(true)}>\r\n                    Смотреть трейлер\r\n                  </button>\r\n                )}\r\n                {user && <ButtonBookmark el={movie}></ButtonBookmark>}\r\n              </div>\r\n\r\n              <ModalWindow movie={movie} srcVideo={srcVideo} isVisible={isModal} title={movie.name} onClose={() => setModal(false)} />\r\n            </div>\r\n\r\n            {movie.videos && movie.videos.trailers.length && width > 500 > 0 && movie.videos.trailers.url !== null ? (\r\n              <div className={s.movie__video}>\r\n                <div className={s.movie__poster} ref={poster}>\r\n                  <img src={movie.backdrop.url !== null ? movie.backdrop.url : movie.poster === null ? noImg : movie.poster.url} alt=\"Картинка\" />\r\n                </div>\r\n                <iframe\r\n                  width=\"100%\"\r\n                  height=\"100%\"\r\n                  ref={myIframe}\r\n                  title=\"trailer\"\r\n                  src={`${srcVideo}?autoplay=1&controls=0&rel=0&autohide=1k&mute=1&disablekb=1&showinfo=0`}\r\n                  allow=\"autoplay\"\r\n                  frameBorder=\"0\">\r\n                  <p>Твой браузер устарел для отображения элемента iframe</p>\r\n                </iframe>\r\n              </div>\r\n            ) : (\r\n              <div className={s.poster}>\r\n                <img src={movie.poster !== null ? movie.poster.url : \"\"} alt=\"Картинка\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n          <Suspense fallback={<div>Loading...</div>}>\r\n            <Actors title=\"Актёры и съёмочная группа\" movie={movie} />\r\n          </Suspense>\r\n          {/* <Actors title=\"Актёры и съёмочная группа\" movie={movie}></Actors> */}\r\n        </div>\r\n      </section>\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n"],"names":["ButtonBookmark","_ref","el","_useState","useState","localStorage","getItem","id","_useState2","_slicedToArray","activeBtn","setActiveBtn","_useState3","JSON","parse","_useState4","isDisable","setIsDisable","_useState5","_useState6","dataTitle","setDataTitle","_useAuth","useAuth","user","db","addFilms","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","name","poster","description","year","docRef","wrap","_context","prev","next","addDoc","collection","_id","sent","console","log","t0","error","stop","_x","_x2","_x3","_x4","_x5","apply","arguments","_handleClick","_callee2","disable","_context2","setItem","stringify","_jsx","className","s","btnAdd","disabled","onClick","handleClick","url","children","_ref$isVisible","isVisible","title","onClose","content","footer","srcVideo","movie","keydownHandler","key","React","document","addEventListener","removeEventListener","modal","_jsxs","modal__dialog","e","stopPropagation","modal__header","modal__title","modal__close","modal__body","modal__content","width","height","src","concat","allow","allowFullScreen","useResize","window","innerWidth","setWidth","useEffect","handleResize","event","target","isScreenSm","isScreenMd","isScreenLg","isScreenXl","isScreenXxl","Actors","lazy","Movie","useParams","setMovie","isLoading","setIsLoading","protectedUrl","fetch","method","headers","process","then","resp","json","data","getMovie","videos","trailers","length","replace","_React$useState","_React$useState2","isModal","setModal","useRef","myIframe","setTimeout","current","setAttribute","Skeleton","movie__wrapper","movie__content","info","info__title","info__rating","info__ratingKp","rating","kp","toFixed","info__year","info__genres","genres","map","index","movieLength","info__movieLength","info__description","info__buttons","info__btn","ModalWindow","movie__video","movie__poster","ref","backdrop","noImg","alt","frameBorder","Suspense","fallback"],"sourceRoot":""}