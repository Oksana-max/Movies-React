"use strict";(self.webpackChunkapp_movies=self.webpackChunkapp_movies||[]).push([[280],{1919:function(e,i,o){o.d(i,{Z:function(){return c}});var n=o(4165),t=o(5861),a=o(9439),s=o(2791),r={btnAdd:"ButtonBookmark_btnAdd__MKjhL"},l=o(9206),d=o(2481),_=o(184);function c(e){var i=e.el,o=(0,l.Z)(),c=o.user,m=o.db,u=(0,s.useState)(localStorage.getItem(i.id+"AddedFilms"+c._id)||"false"),f=(0,a.Z)(u,2),v=f[0],p=f[1],h=(0,s.useState)(JSON.parse(localStorage.getItem(i.id+"DisabledFilms"+c._id)||!1)),g=(0,a.Z)(h,2),x=g[0],b=g[1],j=(0,s.useState)(localStorage.getItem(i.id+"dataTitle"+c._id)||"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"),w=(0,a.Z)(j,2),k=w[0],M=w[1],N=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(i,o,t,a,s){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.ET)((0,d.hJ)(m,"films"+c._id),{name:i,id:o,poster:t,description:a,year:s});case 3:r=e.sent,console.log("Document written with ID: ",r.id),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(i,o,n,t,a){return e.apply(this,arguments)}}();function S(){return S=(0,t.Z)((0,n.Z)().mark((function e(){var o,t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem(i.id+"dataTitle"+c._id,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"),o=localStorage.getItem(i.id+"dataTitle"+c._id)||"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",M(o),localStorage.setItem(i.id+"DisabledFilms"+c._id,JSON.stringify(!0)),t=JSON.parse(localStorage.getItem(i.id+"DisabledFilms"+c._id)||!1),b(t),localStorage.setItem(i.id+"AddedFilms"+c._id,"true"),a=localStorage.getItem(i.id+"AddedFilms"+c._id)||"false",p(a);case 9:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}return(0,_.jsx)("button",{className:r.btnAdd,disabled:x,"data-title":k,onClick:function(){!function(){S.apply(this,arguments)}(),N(i.name,i.id,i.poster.url,i.description,i.year)},children:"false"===v?(0,_.jsx)("i",{className:"bx bx-bookmarks"}):(0,_.jsx)("i",{className:"bx bxs-bookmarks"})})}},1280:function(e,i,o){o.r(i),o.d(i,{default:function(){return p}});var n=o(9439),t=o(2791),a=o(7689),s={movie:"Movie_movie__ZbQwJ",movie__wrapper:"Movie_movie__wrapper__Jq0+L",movie__content:"Movie_movie__content__oXgzl",movie__video:"Movie_movie__video__P-588",movie__poster:"Movie_movie__poster__ZufU2",info:"Movie_info__g9FHl",info__title:"Movie_info__title__kdNg2",info__description:"Movie_info__description__Hz6ne",info__buttons:"Movie_info__buttons__SPWZt",info__btn:"Movie_info__btn__rZ823",info__rating:"Movie_info__rating__ndqZT",info__ratingKp:"Movie_info__ratingKp__nbLQy",info__year:"Movie_info__year__M1-T6",info__genres:"Movie_info__genres__x4fLj",info__movieLength:"Movie_info__movieLength__pQZEc",poster:"Movie_poster__o6oHQ"},r={modal:"ModalWindow_modal__+XORu",appear:"ModalWindow_appear__UESBm",modal__dialog:"ModalWindow_modal__dialog__r0mHT",animatetop:"ModalWindow_animatetop__jVOK+","slide-in":"ModalWindow_slide-in__QGhHq",modal__header:"ModalWindow_modal__header__svGbD",modal__footer:"ModalWindow_modal__footer__p4hib",moda__footer:"ModalWindow_moda__footer__zGHVv",modal__close:"ModalWindow_modal__close__0Dvk+",modal__body:"ModalWindow_modal__body__Kp5Qz",modal__content:"ModalWindow_modal__content__EsxUc"},l=o(184),d=function(e){var i=e.isVisible,o=void 0!==i&&i,n=e.title,a=(e.content,e.footer,e.onClose),s=(e.movie,e.srcVideo),d=function(e){if("Escape"===e.key)a()};return t.useEffect((function(){return document.addEventListener("keydown",d),function(){return document.removeEventListener("keydown",d)}})),o?(0,l.jsx)("div",{className:r.modal,onClick:a,children:(0,l.jsxs)("div",{className:r.modal__dialog,onClick:function(e){return e.stopPropagation()},children:[(0,l.jsxs)("div",{className:r.modal__header,children:[(0,l.jsx)("h3",{className:r.modal__title,children:n}),(0,l.jsx)("span",{className:r.modal__close,onClick:a,children:"\xd7"})]}),(0,l.jsx)("div",{className:r.modal__body,children:(0,l.jsx)("div",{className:r.modal__content,children:(0,l.jsx)("iframe",{width:"100%",height:"100%",title:"trailer",src:"".concat(s,"?autoplay=1&rel=0&autohide=1k&showinfo=0"),allow:"autoplay",allowFullScreen:"allowfullscreen",children:(0,l.jsx)("p",{children:"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0443\u0441\u0442\u0430\u0440\u0435\u043b \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 iframe"})})})})]})}):null},_=o(3762),c=o(5592),m=function(){var e=(0,t.useState)(window.innerWidth),i=(0,n.Z)(e,2),o=i[0],a=i[1];return(0,t.useEffect)((function(){var e=function(e){a(e.target.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),{width:o,isScreenSm:o>=576,isScreenMd:o>=768,isScreenLg:o>=992,isScreenXl:o>=1200,isScreenXxl:o>=1400}},u=o(1919),f=o(9206),v=(0,t.lazy)((function(){return o.e(928).then(o.bind(o,1928))}));function p(){var e,i=(0,a.UO)().id,o=(0,t.useState)([]),r=(0,n.Z)(o,2),p=r[0],h=r[1],g=(0,t.useState)(!0),x=(0,n.Z)(g,2),b=x[0],j=x[1],w=(0,f.Z)().user,k=m().width;(0,t.useEffect)((function(){!function(){var e="https://api.kinopoisk.dev/v1.3/movie/".concat(i);fetch(e,{method:"GET",headers:{"X-API-KEY":"RREJW8T-TTE4RVX-P9KEH5W-SW87B4J"}}).then((function(e){return e.json()})).then((function(e){h(e),j(!1)}))}()}),[i]),p&&p.videos&&p.videos.trailers.length>0&&(e=p.videos.trailers[1]?p.videos.trailers[1].url.replace("watch?v=","embed/").replace("v/","embed/"):p.videos.trailers[0].url.replace("watch?v=","embed/").replace("v/","embed/"));var M=t.useState(!1),N=(0,n.Z)(M,2),S=N[0],y=N[1],Z=(0,t.useRef)(),E=(0,t.useRef)();(0,t.useEffect)((function(){setTimeout((function(){Z.current&&k>=500&&Z.current.setAttribute("style","opacity:0;visibility: hidden;pointer-events: none;"),E.current&&k>=500&&E.current.setAttribute("style","opacity:1;visibility: visible;")}),1e3)}),[k]);try{return b?(0,l.jsx)(_.Z,{}):(0,l.jsx)("section",{className:s.movie,children:(0,l.jsxs)("div",{className:s.movie__wrapper,children:[(0,l.jsxs)("div",{className:s.movie__content,children:[(0,l.jsxs)("div",{className:s.info,children:[(0,l.jsx)("h1",{className:s.info__title,children:p.name}),(0,l.jsxs)("div",{className:s.info__rating,children:[(0,l.jsx)("span",{className:s.info__ratingKp,children:p.rating.kp.toFixed(1)}),(0,l.jsx)("span",{className:s.info__year,children:p.year})]}),(0,l.jsx)("div",{className:s.info__genres,children:p.genres&&p.genres.map((function(e,i){return(0,l.jsx)("span",{children:(i?", ":"")+e.name},i)}))}),p.movieLength&&(0,l.jsxs)("span",{className:s.info__movieLength,children:[p.movieLength," \u043c\u0438\u043d."]}),(0,l.jsx)("p",{className:s.info__description,children:p.description}),(0,l.jsxs)("div",{className:s.info__buttons,children:[p.videos&&p.videos.trailers.length>0&&(0,l.jsx)("button",{className:s.info__btn,onClick:function(){return y(!0)},children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0440\u0435\u0439\u043b\u0435\u0440"}),w&&(0,l.jsx)(u.Z,{el:p})]}),(0,l.jsx)(d,{movie:p,srcVideo:e,isVisible:S,title:p.name,onClose:function(){return y(!1)}})]}),p.videos&&p.videos.trailers.length&&k>500>0&&null!==p.videos.trailers.url?(0,l.jsxs)("div",{className:s.movie__video,children:[(0,l.jsx)("div",{className:s.movie__poster,ref:Z,children:(0,l.jsx)("img",{src:null!==p.backdrop.url?p.backdrop.url:null===p.poster?c:p.poster.url,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})}),(0,l.jsx)("iframe",{width:"100%",height:"100%",ref:E,title:"trailer",src:"".concat(e,"?autoplay=1&controls=0&rel=0&autohide=1k&mute=1&disablekb=1&showinfo=0"),allow:"autoplay",frameBorder:"0",children:(0,l.jsx)("p",{children:"\u0422\u0432\u043e\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0443\u0441\u0442\u0430\u0440\u0435\u043b \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 iframe"})})]}):(0,l.jsx)("div",{className:s.poster,children:(0,l.jsx)("img",{src:null!==p.poster?p.poster.url:"",alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"})})]}),(0,l.jsx)(t.Suspense,{fallback:(0,l.jsx)("div",{children:"Loading..."}),children:(0,l.jsx)(v,{title:"\u0410\u043a\u0442\u0451\u0440\u044b \u0438 \u0441\u044a\u0451\u043c\u043e\u0447\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430",movie:p})})]})})}catch(W){console.log(W)}}},5592:function(e,i,o){e.exports=o.p+"static/media/noImg.443a3e252c0c4da740fc.jpg"}}]);
//# sourceMappingURL=280.0c49986f.chunk.js.map